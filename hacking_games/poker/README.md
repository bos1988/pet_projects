# Теория покера
> **Просчет игры в покер на основании классической теории вероятности.**

<br/>

### Стек:

*Теория вероятности, Комбинаторика<br/>Разработка алгоритма<br/>ООП<br/>Оптимизация алгоритма<br/>Отладка, Тестирование<br/>Сбор данных<br/>Анализ данных*

### Используемые библиотеки:
*pandas<br/>numpy<br/>matplotlib<br/>Image<br/>seaborn<br/>itertools<br/>functools<br/>operator<br/>IntProgress<br/>time*

### Результат работы:

1. Разработан алгоритм расчета вероятностей сбора комбинации для различных игровых ситуаций.
2. Разработан алгоритм расчета вероятности выигрыша для игры с одним соперником.
3. Получена таблица вероятностей сбора комбинации в Холдеме для всех вариантов карт на руках.
4. На основе таблицы вероятностей сбора комбинации в Холдеме проведен анализ получаемых на руку карт и определены лучшие и худшие карты для сбора лучшей комбинации.

### Примечания:

* Первый алгоритм использует самодельный класс Deck для работы с колодой и библиотеку pandas для расчета комбинаций.<br/>Не оптимизирован, работает медленно и не отрабатывает пару тестов.
* Второй алгоритм использует списки и работает в 2000 раз быстрее, что позволяет использовать его с практическим применением.
* Использование pytest позволило полностью отладить работу нового алгоритма.

### Рабочие файлы:
| Имя                                     | Описание                                                                                                                                    |
|:----------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------|
| **poker v1.2.0.ipynb**                  | Первая версия алгоритма:<br/>Обзор алгоритма, расчеты вероятностей, проверка алгоритма                                                      |
| **poker v2.2.0.ipynb**                  | Вторая версия алгоритма:<br/>Обзор алгоритма, расчеты вероятностей, проверка алгоритма, анализ вероятностей, оценка качества стартовых карт |
| **func_poker.py**                       | Рабочие функции алгоритма v2                                                                                                                |
| **collecting_probabilities.ipynb**      | Составление таблицы вероятностей **probabilities.csv** на основе алгоритма v2                                                               |
| **test_pandas_get_best_combination.py** | Отладка алгоритма расчета комбинации для v1                                                                                                 |
| **test_quick_get_best_combination.py**  | Отладка алгоритма расчета комбинации для v2                                                                                                 |
| **game.ipynb**                          | Практическое применение алгоритма для расчета вероятностей во время игры в Холдем на основе алгоритма v2                                    |
| **probabilities.csv**                   | Таблица вероятностей собрать комбинацию по двум стартовым картам в Холдеме                                                                  |


### Table of contents (poker v2.2.0.ipynb):

<div class="toc"><ul class="toc-item"><li><span><a href="#Подгружаемые-библиотеки" data-toc-modified-id="Подгружаемые-библиотеки-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Подгружаемые библиотеки</a></span></li><li><span><a href="#Колода" data-toc-modified-id="Колода-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>Колода</a></span><ul class="toc-item"><li><span><a href="#Создание-колоды" data-toc-modified-id="Создание-колоды-2.1"><span class="toc-item-num">2.1&nbsp;&nbsp;</span>Создание колоды</a></span></li><li><span><a href="#Работа-с-колодой" data-toc-modified-id="Работа-с-колодой-2.2"><span class="toc-item-num">2.2&nbsp;&nbsp;</span>Работа с колодой</a></span></li><li><span><a href="#Проверка-комбинаций" data-toc-modified-id="Проверка-комбинаций-2.3"><span class="toc-item-num">2.3&nbsp;&nbsp;</span>Проверка комбинаций</a></span></li></ul></li><li><span><a href="#Разбор-вероятностей:" data-toc-modified-id="Разбор-вероятностей:-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>Разбор вероятностей:</a></span><ul class="toc-item"><li><span><a href="#Комбинации-стартовых-карт" data-toc-modified-id="Комбинации-стартовых-карт-3.1"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>Комбинации стартовых карт</a></span></li><li><span><a href="#Комбинации-стола" data-toc-modified-id="Комбинации-стола-3.2"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>Комбинации стола</a></span></li><li><span><a href="#Проверим-работу-алгоритма-на-известных-вероятностях-из-сети" data-toc-modified-id="Проверим-работу-алгоритма-на-известных-вероятностях-из-сети-3.3"><span class="toc-item-num">3.3&nbsp;&nbsp;</span>Проверим работу алгоритма на известных вероятностях из сети</a></span><ul class="toc-item"><li><span><a href="#Комбинации-1-(1-карта)" data-toc-modified-id="Комбинации-1-(1-карта)-3.3.1"><span class="toc-item-num">3.3.1&nbsp;&nbsp;</span>Комбинации 1 (1 карта)</a></span></li><li><span><a href="#Комбинации-2-(1-карта)" data-toc-modified-id="Комбинации-2-(1-карта)-3.3.2"><span class="toc-item-num">3.3.2&nbsp;&nbsp;</span>Комбинации 2 (1 карта)</a></span></li><li><span><a href="#Комбинации-3-(2-карты)" data-toc-modified-id="Комбинации-3-(2-карты)-3.3.3"><span class="toc-item-num">3.3.3&nbsp;&nbsp;</span>Комбинации 3 (2 карты)</a></span></li><li><span><a href="#Комбинации-4-(рука)" data-toc-modified-id="Комбинации-4-(рука)-3.3.4"><span class="toc-item-num">3.3.4&nbsp;&nbsp;</span>Комбинации 4 (рука)</a></span></li><li><span><a href="#Комбинации-5-(3-карты)" data-toc-modified-id="Комбинации-5-(3-карты)-3.3.5"><span class="toc-item-num">3.3.5&nbsp;&nbsp;</span>Комбинации 5 (3 карты)</a></span></li><li><span><a href="#Комбинации-6-(3-карты)" data-toc-modified-id="Комбинации-6-(3-карты)-3.3.6"><span class="toc-item-num">3.3.6&nbsp;&nbsp;</span>Комбинации 6 (3 карты)</a></span></li><li><span><a href="#Комбинации-7-(3-карты)" data-toc-modified-id="Комбинации-7-(3-карты)-3.3.7"><span class="toc-item-num">3.3.7&nbsp;&nbsp;</span>Комбинации 7 (3 карты)</a></span></li><li><span><a href="#Комбинации-8-(3-карты)" data-toc-modified-id="Комбинации-8-(3-карты)-3.3.8"><span class="toc-item-num">3.3.8&nbsp;&nbsp;</span>Комбинации 8 (3 карты)</a></span></li></ul></li><li><span><a href="#Вероятности-победы-с-одним-противником" data-toc-modified-id="Вероятности-победы-с-одним-противником-3.4"><span class="toc-item-num">3.4&nbsp;&nbsp;</span>Вероятности победы с одним противником</a></span><ul class="toc-item"><li><span><a href="#Победа-после-ривера" data-toc-modified-id="Победа-после-ривера-3.4.1"><span class="toc-item-num">3.4.1&nbsp;&nbsp;</span>Победа после ривера</a></span></li><li><span><a href="#Победа-после-терна-перед-ривером" data-toc-modified-id="Победа-после-терна-перед-ривером-3.4.2"><span class="toc-item-num">3.4.2&nbsp;&nbsp;</span>Победа после терна перед ривером</a></span></li><li><span><a href="#Победа-после-флопа-перед-терном" data-toc-modified-id="Победа-после-флопа-перед-терном-3.4.3"><span class="toc-item-num">3.4.3&nbsp;&nbsp;</span>Победа после флопа перед терном</a></span></li></ul></li></ul></li><li><span><a href="#Анализ-вероятностей" data-toc-modified-id="Анализ-вероятностей-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>Анализ вероятностей</a></span><ul class="toc-item"><li><span><a href="#Загрузка-данных" data-toc-modified-id="Загрузка-данных-4.1"><span class="toc-item-num">4.1&nbsp;&nbsp;</span>Загрузка данных</a></span></li><li><span><a href="#Подготовка-данных" data-toc-modified-id="Подготовка-данных-4.2"><span class="toc-item-num">4.2&nbsp;&nbsp;</span>Подготовка данных</a></span></li><li><span><a href="#Анализ-комбинаций" data-toc-modified-id="Анализ-комбинаций-4.3"><span class="toc-item-num">4.3&nbsp;&nbsp;</span>Анализ комбинаций</a></span></li><li><span><a href="#Анализ-распределения-веротностей-(оценка-качества-карт-на-руки)" data-toc-modified-id="Анализ-распределения-веротностей-(оценка-качества-карт-на-руки)-4.4"><span class="toc-item-num">4.4&nbsp;&nbsp;</span>Анализ распределения веротностей (оценка качества карт на руки)</a></span><ul class="toc-item"><li><span><a href="#Определение-метрики" data-toc-modified-id="Определение-метрики-4.4.1"><span class="toc-item-num">4.4.1&nbsp;&nbsp;</span>Определение метрики</a></span></li><li><span><a href="#Оценка-качества-стартовых-карт" data-toc-modified-id="Оценка-качества-стартовых-карт-4.4.2"><span class="toc-item-num">4.4.2&nbsp;&nbsp;</span>Оценка качества стартовых карт</a></span></li></ul></li><li><span><a href="#Выводы-по-анализу" data-toc-modified-id="Выводы-по-анализу-4.5"><span class="toc-item-num">4.5&nbsp;&nbsp;</span>Выводы по анализу</a></span></li></ul></li><li><span><a href="#Выводы" data-toc-modified-id="Выводы-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>Выводы</a></span></li></ul></div>
